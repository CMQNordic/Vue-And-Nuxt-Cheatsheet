<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Basic examples</title>
    </head>
    <body>
        <script src="https://unpkg.com/vue/dist/vue.js"></script>

        <h1>APP1</h1>
        <div id="app1">
            Name:<input v-model="name" /><button @click="age++">
                Increase age
            </button>
            <p>
                My name is
                <span :class="{'visible-empty': (name.length <= 0)}"></span>
                    {{name}}
                </span>
            </p>
            <p>
                I am
                <span :class="{'visible-empty': (age <= 0)}"> {{age}} </span>
                years old.
            </p>
            <p>{{ getName }} | {{ getAge() }}</p>
        </div>

        <h1>APP2</h1>
        <div id="app2"></div>

        <h1>APP3</h1>
        <div id="app3">
            <my-local-component :type="'Local'"></my-local-component>
            <my-global-component :type="'Global'"></my-global-component>
        </div>

        <script>
          //app1
          var vm1 = new Vue({
              el: '#app1',
              data: {
                  name: '',
                  age: null,
              },
              computed: {
                  getName: function () {
                      return this.name;
                  },
              },
              methods: {
                  getAge: function () {
                      return this.age;
                  },
              },
              watch: {
                  age: function () {
                      this.age == 3 || this.age == 6
                          ? alert('Age is now ' + this.age)
                          : '';
                  },
              },
          });

          //app2
          var vm2 = new Vue({
              el: '#app2',
              computed: {
                  // We can not access vm1 direct from template. Must go though computed attribute
                  getAgeFromApp1: function () {
                      return vm1.age;
                  },
              },
              methods: {
                  onEvent: function (age, event) {
                      vm1.age = age > 0 ? age : vm1.age;
                      console.log(event.type);
                      console.log(this.$refs);
                      this.$refs.typeText.innerText =
                          'Event type: ' + event.type;
                  },
              },
              mounted: function () {
                  // change the text of button with help of ref
                  // template have not set $refs until mounted
                  this.$refs.myButton.innerText =
                      'Click to set age to 23 in app1';
              },
              template:
                  '<div><button @click="onEvent(23, $event)" @mouseover="onEvent(0, $event)"  ref="myButton"></button><p ref="typeText"></p>Age in app1 is {{ getAgeFromApp1 }}</div>',
          });

          // Following component can work very well for small to medium-sized projects,
          // where JavaScript is only used to enhance certain views.
          // In more complex projects however, single-file components with a .vue extension,
          // should be used together with build tools such as Webpack or Browserify.

          // simple component definition with template. note data is here a function.
          var cmp = {
              data: function () {
                  return { number: 5 };
              },
              // props define parameters sent down to the component from parent
              props: ['type'],
              template:
                  '<div>{{type}} component. Number {{ number }} <button @click="number+=1">Increase</button></div>',
          };

          // Global component definition
          Vue.component('my-global-component', cmp);

          //app3
          var app3 = new Vue({
              el: '#app3',
              // local component definition
              components: {
                  'my-local-component': cmp,
              },
          });
      </script>

      <style>
          .visible-empty {
              display: inline-block;
              height: 18px;
              width: 40px;
              border: 1px dotted black;
          }
      </style>
    </body>
</html>
